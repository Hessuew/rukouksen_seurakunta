---
import Layout from '~/layouts/PageLayout.astro';
import Features4 from '~/components/widgets/Features4.astro';
import Hero from '~/components/widgets/Hero.astro';
import type { ImageMetadata } from 'astro';
import Acknowledgment from '~/components/widgets/Acknowledgment.astro';

// Import images
import skrLogo from '~/assets/images/funders/Skr Logo.svg';
import wihuriLogo from '~/assets/images/funders/Wihuri Foundation Logo.svg';
import pskLogo from '~/assets/images/funders/Pohjois Savon Kulttuurirahasto.png';
import orionLogo from '~/assets/images/funders/Orion Oyj Logo.svg';
import aarneLogo from '~/assets/images/funders/Aarne Koskelon Foundation.png';
import pauloLogo from '~/assets/images/funders/Paulon Saatio Logo.png';
import uefLogo from '~/assets/images/funders/UEF Logo.png';
import paavoNurmiLogo from '~/assets/images/funders/paavo-nurmi-foundation-logo.webp';
import yjsLogo from '~/assets/images/funders/YJS Anniversary Logo.png';
import leroyLogo from '~/assets/images/funders/Leroy Logo Navigation.png';
import pediatricLogo from '~/assets/images/funders/Lastentautien Tunnus.gif';
import idaMontinLogo from '~/assets/images/funders/Idamontin Insaatio Logo Dark.png';
import kordelinLogo from '~/assets/images/funders/Kordelin.jpeg';
import easoLogo from '~/assets/images/funders/EASO.jpeg';
import Spacer from '~/components/widgets/Spacer.astro';

interface Funder {
  name: string;
  logo?: ImageMetadata;
  url: string;
  label?: {
    text: string;
    style: string;
  };
  wider?: boolean;
  small?: boolean;
}

const metadata = {
  title: 'Funders | urFIT-child Research Project',
  description:
    'Our research is supported by prestigious organizations including the Academy of Finland, Finnish Cultural Foundation, and European Association for the Study of Obesity. Learn about the partners enabling our groundbreaking childhood health research.',
};

const funders: Funder[] = [
  {
    name: 'Central Finnish Cultural Foundation',
    logo: skrLogo,
    url: 'https://skr.fi/en',
  },
  {
    name: 'Jenny and Antti Wihuri Foundation',
    logo: wihuriLogo,
    url: 'https://wihurinrahasto.fi/?lang=en',
  },
  {
    name: 'The North Savo regional Finnish Cultural Foundation',
    logo: pskLogo,
    url: 'https://skr.fi/rahastot/pohjois-savon-rahasto',
    wider: true,
  },
  {
    name: 'Orion Research Foundation',
    logo: orionLogo,
    url: 'https://www.orion.fi/en/science/orion-research-foundation/',
    small: true,
  },
  {
    name: 'Aarne Koskelo Foundation',
    logo: aarneLogo,
    url: 'http://www.aarnekoskelonsaatio.fi/',
  },
  {
    name: 'Antti and Tyyne Soininen Foundation',
    logo: uefLogo,
    url: 'https://www.uef.fi/en/university-foundations',
  },
  {
    name: 'Paulo Foundation',
    logo: pauloLogo,
    url: 'https://paulo.fi/apurahat',
  },
  {
    name: 'Paavo Nurmi Foundation',
    logo: paavoNurmiLogo,
    url: 'https://www.paavonurmensaatio.fi/en/foundation/',
  },
  {
    name: 'Yrjö Jahnsson Foundation',
    logo: yjsLogo,
    url: 'https://www.yjs.fi/en/',
  },
  {
    name: 'Finnish Foundation for Cardiovascular Research',
    logo: leroyLogo,
    url: 'https://www.sydantutkimussaatio.fi/en/foundation',
  },
  {
    name: 'Pediatric Research Foundation',
    logo: pediatricLogo,
    url: 'https://www.lastentautientutkimussaatio.fi/',
    wider: true,
  },
  {
    name: 'Ida Montin Foundation',
    logo: idaMontinLogo,
    url: 'https://idamontininsaatio.fi/',
  },
  {
    name: 'Alfred Kordelin Foundation',
    logo: kordelinLogo,
    url: 'https://kordelin.fi/en/frontpage',
  },
  {
    name: 'European Association for the Study of Obesity',
    logo: easoLogo,
    url: 'https://www.uef.fi/en/article/andrew-agbaje-wins-prestigious-easo-novo-nordisk-foundation-new-investigator-award-in-childhood',
  },
];

const items = funders.map((funder) => ({
  title: funder.name,
  subtitle: '',
  description: '',
  image: funder.logo
    ? {
        src: funder.logo,
        alt: `${funder.name} logo`,
      }
    : undefined,
  url: funder.url,
  wider: funder.wider,
  small: funder.small,
}));
---

<Layout metadata={metadata}>
  <Hero
    classes={{
      labelContainer: 'pb-0 md:pb-0 lg:pb-0',
      title: 'pb-0 md:pb-0 lg:pb-0',
    }}
    tagline="Our Supporters"
    title="Research Funders"
    subtitle="We are grateful to our funders who make this important research possible."
  />

  <Features4
    items={items}
    columns={3}
    classes={{
      container: 'max-w-7xl mx-auto px-4 sm:px-6 py-8',
      items: {
        container: 'gap-6',
      },
    }}
  />

  <Spacer />

  <Acknowledgment>
    <Fragment slot="content">
      <div class="space-y-6">
        <p>
          We extend our deepest gratitude to our esteemed funding partners who have placed their trust in the
          urFIT-child Research Project. Your support goes far beyond financial backing – it represents a shared
          commitment to advancing children's health and well-being.
        </p>

        <p>
          Each breakthrough, discovery, and step forward in our research is a direct result of your investment in our
          vision. Your support enables our dedicated team to pursue innovative approaches, utilize cutting-edge
          technology, and maintain the highest standards of scientific inquiry.
        </p>

        <p>
          As valued members of the urFIT-child community, you are integral to our mission of improving children's
          cardiovascular health and fitness. Together, we are building a healthier future for the next generation, and
          your partnership makes this important work possible.
        </p>

        <div class="pt-8 text-center">
          <p class="text-lg md:text-xl font-bold text-primary dark:text-primary-dark mb-2">Thank You</p>
          <p class="text-sm md:text-base text-gray-600 dark:text-gray-400 font-medium italic">
            for being part of our journey to improve children's health
          </p>
        </div>
      </div>
    </Fragment>
  </Acknowledgment>

  <Spacer size="lg" />
</Layout>

<style>
  [data-intersect] {
    opacity: 0;
    transform: translateY(1rem);
    transition:
      opacity 1s ease-out,
      transform 1s ease-out;
  }

  [data-intersect].intersected {
    opacity: 1;
    transform: translateY(0);
  }
</style>

<script>
  function initIntersectionObserver() {
    const elements = document.querySelectorAll('[data-intersect]');

    const observer = new IntersectionObserver(
      (entries: IntersectionObserverEntry[]) => {
        entries.forEach((entry: IntersectionObserverEntry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add('intersected');
            observer.unobserve(entry.target);
          }
        });
      },
      {
        root: null,
        rootMargin: '0px',
        threshold: 0.1,
      }
    );

    elements.forEach((element: Element) => observer.observe(element));
  }

  // Initialize on page load
  initIntersectionObserver();

  // Re-initialize on view transitions
  document.addEventListener('astro:page-load', initIntersectionObserver);
</script>
